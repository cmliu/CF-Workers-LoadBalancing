# CF-Workers-LoadBalancing

## 项目简介

这个项目是一个基于 Cloudflare Workers 的负载均衡器。它可以处理传入的 HTTPS 请求，并根据配置的后端域名列表，选择一个有效的后端进行请求转发。

>注意：因为测试可用性会放大请求数量，所以 **负载均衡后端数量 ≥ 3** 的时候，该项目才有意义！

## 文件结构

- `_worker.js`：主要的代码文件，包含处理 HTTPS 请求的逻辑。

## 使用方法

1. 将代码部署到 Cloudflare Workers。
2. 根据需要配置环境变量 `HOST` 和 `PATH`。
   - `HOST`：后端域名列表，可以是多个域名，用逗号分隔。
   - `PATH`：测试路径，默认为 `/`。
3. 当有 HTTPS 请求传入时，代码会根据配置的后端域名列表，选择一个有效的后端进行请求转发。

## 示例

假设环境变量 `HOST` 配置为 `www.example.com`，当有 HTTPS 请求传入时，代码会将请求转发到 `www.example.com`，并在路径后追加测试路径 `/sub`。

## 变量说明
| 变量名 | 示例 | 必填 | 备注 |
|--------|---------|-|-----|
| `HOST` | `www.baidu.com`,`www.sogou.com` |✅| 负载均衡后端域名（HOST之间使用`,`或`换行`作间隔） |
| `PATH` | `/sub` |❌| 响应代码的测试路径，用来判断后端可用状态（默认`/`） |
| `CODE` | `202` |❌| 指定测试的响应代码（默认`200`） |

## 贡献
GPT
